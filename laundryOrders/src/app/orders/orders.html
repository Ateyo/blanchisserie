<p-card header="Mes Commandes">
    <div class="pb-3 flex justify-end">
        <p-button label="Nouvelle Commande" icon="pi pi-plus" (onClick)="createNewOrder()"></p-button>
    </div>

    <p-table [value]="orders" [paginator]="true" [rows]="10" [tableStyle]="{'min-width': '50rem'}">
        <ng-template pTemplate="header">
            <tr>
                <th>Date</th>
                <th>Articles</th>
                <th>Statut</th>
                <th>Actions</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-order>
            <tr>
                <td>{{ order.date | date:'dd/MM/yyyy' }}</td>
                <td>{{ order.articles }}</td>
                <td>{{ order.status }}</td>
                <td>
                    <p-button icon="pi pi-eye" (onClick)="showOrderDetails(order)" styleClass="p-button-sm"></p-button>
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="emptyMessage">
            <tr>
                <td colspan="4">Aucune commande trouvée.</td>
            </tr>
        </ng-template>
    </p-table>
</p-card>

<p-dialog header="Détails de la Commande" [(visible)]="displayDialog" [modal]="true" [style]="{ width: '50vw' }"
    [draggable]="false" [resizable]="false">
    <div *ngIf="selectedOrder">
        <p><b>Date:</b> {{ selectedOrder.date | date:'dd/MM/yyyy HH:mm' }}</p>
        <p><b>Identité:</b> {{ selectedOrder.identityName }}</p>
        <p><b>Articles:</b> {{ selectedOrder.articles }}</p>
        <p><b>Statut:</b> {{ selectedOrder.status }}</p>
        <p *ngIf="selectedOrder.motif"><b>Motif:</b> {{ selectedOrder.motif }}</p>
        <p *ngIf="selectedOrder.commentaire"><b>Commentaire:</b> {{ selectedOrder.commentaire }}</p>
    </div>
</p-dialog>

<p-toast></p-toast>